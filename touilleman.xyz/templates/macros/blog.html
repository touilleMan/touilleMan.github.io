{% macro render_blog_post(post, from_index=false) %}
  <div class="blog-post">
  {% if from_index %}
    <h2><a href="{{ post|url }}">{{ post.title }}</a></h2>
  {% else %}
    <h2>{{ post.title }}</h2>
  {% endif %}
  <p class="meta">
    {{ post.pub_date }}
     - 
    {% if post.twitter_handle %}
      <a href="https://twitter.com/{{ post.twitter_handle
        }}">{{ post.author or post.twitter_handle }}</a>
    {% else %}
      {{ post.author }}
    {% endif %}
    {% for category in post.categories %}
      <a href="{{ site.get('/categories/' + category)|url }}">
      <span class="label label-default">{{ category }}</span></a>
    {% endfor %}
  </p>
  {{ post.body }}
  </div>
{% endmacro %}

# Old template
{%if 0 %}

{% macro render_blog_post_extract(post) %}
  <div class="blog-post-extract">
    <h2><a href="{{ post|url }}">{{ post.title }}</a></h2>
    <p class="meta">
      {{ post.pub_date }}
       - 
      {% if post.twitter_handle %}
        <a href="https://twitter.com/{{ post.twitter_handle
          }}">{{ post.author or post.twitter_handle }}</a>
      {% else %}
        {{ post.author }}
      {% endif %}
      {% for category in post.categories %}
        <a href="{{ site.get('/categories/' + category)|url }}">
        <span class="label label-default">{{ category }}</span></a>
      {% endfor %}
    </p>
    {{ post.body.source | truncate | markdown }}
  </div>
{% endmacro %}

{% else %}

{% macro render_blog_post_extract(post) %}
  <div class="panel panel-default blog-post-extract">
    <div class="panel-heading">
      <h3 style="padding: 0px"><a href="{{ post|url }}">{{ post.title }}</a></h3>
      <p>
        {{ post.pub_date }}
         - 
        {% if post.twitter_handle %}
          <a href="https://twitter.com/{{ post.twitter_handle
            }}">{{ post.author or post.twitter_handle }}</a>
        {% else %}
          {{ post.author }}
        {% endif %}
        {% for category in post.categories %}
          <a href="{{ site.get('/categories/' + category)|url }}">
          <span class="label label-default">{{ category }}</span></a>
        {% endfor %}
      </p>
    </div>
    <div class="panel-body">
      {{ post.body.source | truncate | markdown }}
    </div>
  </div>
{% endmacro %}

{% endif %}
